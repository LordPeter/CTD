#############################
# CTD spawns scripted effects
#
# by LordPeter
#############################

### Has chosen 2 products
## This MUST be called in an province scope to work properly
# Checks whether province owner has already chosen 2 resources to spawn and thus isn't eligible for another one

# Has chosen 2 products
has_chosen_2_products_CTD_trigger = {
	count = 2
	# list of all the resource flags - NOTE check if count works with that with a testy event first!
}


### Spawn allows for 2nd product
## This MUST be called in an province scope to work properly
# Checks whether spawn output can even be split up, because some spawns only allow for a single product (e.g. silk)

# Spawn allows 2nd product
chosen_spawn_allows_for_2nd_product_CTD_trigger = {
	# simply checks the opposite, i.e. if spawn can NOT output more than one resource
	NOR = {
		has_province_flag = 
	}
}


### Match spawn to cap
## This MUST be called in an province scope to work properly
# Matches the spawn variable to (in some cases: dynamic or unique) spawn type cap and also workforce

# Unique:
match_spawn_hunting_to_caps_CTD_effect = {
	# Check whether spawn type cap or workforce is limiting factor (smaller), then do stuff
	if = {	# Spawn type cap is limiting
		limit = {
			check_variable = {
				which = province_workforce_simple_labour
				which = province_cap_hunting	# Unique, hidden cap type
			}
		}
		set_variable = {
			which = var_spawn_hunting
			which = province_cap_hunting
		}
	}
	else = {	# Workforce is limiting
		limit = {
			check_variable = {
				which = province_cap_hunting	# Unique, hidden cap type
				which = province_workforce_simple_labour
			}
		}
		set_variable = {
			which = var_spawn_hunting
			which = province_workforce_simple_labour
		}
	}
}

	# For reference: the disaster modification variables
	# set_variable = {
		# which = province_temporary_effect_on_agriculture
		# value = 0
	# }
	# set_variable = {
		# which = province_temporary_effect_on_livestock
		# value = 0
	# }
	# and the workforce variables:
	# set_variable = {
		# which = province_workforce_simple_labour
		# value = 0
	# }
	# set_variable = {
		# which = province_workforce_craftsmanship
		# value = 0
	# }
	 # and the cap variables:
	# change_variable = {
		# which = province_cap_mining
		# value = 5
	# }
	# change_variable = {
		# which = province_cap_agriculture
		# value = 5
	# }
	# change_variable = {
		# which = province_cap_forests
		# value = 5
	# }
	# change_variable = {
		# which = province_cap_livestock
		# value = 5
	# }
	# change_variable = {
		# which = province_cap_refined
		# value = 5
	# }
	# change_variable = {
		# which = province_cap_finalized
		# value = 5
	# }

